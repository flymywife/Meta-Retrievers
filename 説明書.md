説明書

与えられた「固有名詞」に対して
5W1Hに基づくクエリを生成します。
その後、そのクエリに対応するアンサーを生成します。
さらにクエリとアンサーをベクトル化して
コサイン類似度を計算して最適なマッチングを抽出します。
※固有名詞はポピュラーな歴史上の人物とかが良いです

また、アンサーのトークンの長さを指定することができます。
トークンの長さを指定してクエリに対して適切なアンサーを返すことができるかどうか測定します。

使用方法

プログラムを実行: python app.py
Gradioインターフェースが起動し、ブラウザでアクセス可能になります
固有名詞を入力し、Embeddingモデルを選択、回答の最大トークン数を設定
「Submit」をクリックして処理を開始

主要な関数

generate_5w1h_queries: エンティティに基づいて5W1H質問を生成
generate_answer: 質問に対する回答を生成
vectorize: テキストをベクトル化
cosine_similarity: コサイン類似度を計算
process_entity: エンティティの処理全体を管理
gradio_interface: Gradioインターフェース用の関数

出力

生成された質問と回答
質問と回答間のコサイン類似度サマリー
詳細な類似度情報（JSON形式）
最適マッチングのサマリー

データ保存
処理結果はhistory/[モデル名]フォルダ内にJSON形式で保存されます。

queries: 生成された質問
corpus: 生成された回答
similarities: 計算された類似度
best_matches: 最適なマッチング

注意点

OpenAI APIの使用にはコストがかかる場合があります
大量のリクエストを短時間で行うと、API制限に達する可能性があります
生成された質問や回答の品質は、OpenAIモデルの性能に依存します

エラーハンドリング
エラーが発生した場合、ログに記録され、Gradioインターフェース上にエラーメッセージが表示されます。